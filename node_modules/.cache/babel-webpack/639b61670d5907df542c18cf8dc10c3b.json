{"ast":null,"code":"import { FormControl } from \"@angular/forms\";\nimport { Student } from \"src/app/classes/student\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/student-details.service\";\nimport * as i2 from \"src/app/services/students.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction StudentGradesComponent_ng_container_0_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 7);\n    i0.ɵɵtext(1, \"There are no GRADES to show!\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StudentGradesComponent_ng_container_0_tr_17_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"th\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const nota_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(nota_r3.numeMaterie);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(nota_r3.nota);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(nota_r3.name);\n  }\n}\n\nfunction StudentGradesComponent_ng_container_0_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, StudentGradesComponent_ng_container_0_tr_17_ng_container_1_Template, 7, 3, \"ng-container\", 0);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isVisible);\n  }\n}\n\nfunction StudentGradesComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\");\n    i0.ɵɵelementStart(2, \"table\", 1);\n    i0.ɵɵelementStart(3, \"thead\");\n    i0.ɵɵelementStart(4, \"tr\", 2);\n    i0.ɵɵelementStart(5, \"th\", 3);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"tr\");\n    i0.ɵɵelementStart(8, \"th\", 4);\n    i0.ɵɵtext(9, \"Materie\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\", 4);\n    i0.ɵɵtext(11, \"Nota\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\", 4);\n    i0.ɵɵtext(13, \"Profesor\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"tbody\");\n    i0.ɵɵelementStart(15, \"tr\");\n    i0.ɵɵtemplate(16, StudentGradesComponent_ng_container_0_td_16_Template, 2, 0, \"td\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, StudentGradesComponent_ng_container_0_tr_17_Template, 2, 1, \"tr\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(ctx_r0.stdInfo.nume);\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isVisible);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.stdGrades);\n  }\n}\n\nexport let StudentGradesComponent = /*#__PURE__*/(() => {\n  class StudentGradesComponent {\n    constructor(studentDetails, studentService, fb) {\n      this.studentDetails = studentDetails;\n      this.studentService = studentService;\n      this.fb = fb;\n      this.stdInfo = new Student();\n      this.ssss = {\n        idElev: this.stdInfo.id\n      };\n      this.situatieNote = [{\n        Romana: []\n      }, {\n        Matematica: []\n      }, {\n        Fizica: []\n      }, {\n        Chimie: []\n      }, {\n        Biologie: []\n      }, {\n        Geografie: []\n      }, {\n        Istorie: []\n      }];\n      this.stdDetails = this.fb.group({\n        idElev: new FormControl(\"\")\n      });\n    }\n\n    getStudents() {\n      this.getStd = this.studentService.getStudents().subscribe(data => {\n        this.std = data;\n        console.log(this.std);\n      }, err => {\n        console.error(err);\n      });\n    }\n\n    rcvStdGrd() {\n      this.getStdGrd = this.studentDetails.getStudentGrades(this.stdInfo.id).subscribe(data => {\n        this.stdGrades = data;\n        this.isVisible = true;\n      }, err => {\n        console.log(err);\n        this.isVisible = false;\n      });\n    }\n\n    rcvAllStdGrd() {\n      this.getAllStdGrd = this.studentDetails.getAllStudentsGrades().subscribe(data => {\n        this.allStdGrades = data;\n        console.log(this.allStdGrades);\n      }, err => {\n        console.error(err.message);\n      });\n    }\n\n    changeStudent($e) {\n      this.stdDetails.patchValue({\n        idElev: $e.target.value\n      });\n      this.isVisible = false;\n      this.rcvStdGrd();\n    }\n\n    ngOnInit() {\n      // this.getStudents();\n      this.rcvStdGrd();\n    }\n\n    ngOnDestroy() {\n      if (this.getAllStdGrd) {\n        this.getAllStdGrd.unsubscribe();\n      }\n\n      if (this.getStd) {\n        this.getStd.unsubscribe();\n      }\n\n      if (this.getStdGrd) {\n        this.getStdGrd.unsubscribe();\n      }\n    }\n\n    ngOnChanges() {\n      this.ngOnDestroy();\n      this.rcvStdGrd();\n    }\n\n  }\n\n  StudentGradesComponent.ɵfac = function StudentGradesComponent_Factory(t) {\n    return new (t || StudentGradesComponent)(i0.ɵɵdirectiveInject(i1.StudentDetailsService), i0.ɵɵdirectiveInject(i2.StudentsService), i0.ɵɵdirectiveInject(i3.FormBuilder));\n  };\n\n  StudentGradesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StudentGradesComponent,\n    selectors: [[\"app-student-grades\"]],\n    inputs: {\n      stdInfo: \"stdInfo\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngIf\"], [1, \"table\"], [\"id\", \"studentName\"], [\"colspan\", \"3\"], [\"scope\", \"col\", 1, \"tableHeader\"], [\"colspan\", \"4\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"4\"], [\"scope\", \"row\", 1, \"tableLeft\"]],\n    template: function StudentGradesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, StudentGradesComponent_ng_container_0_Template, 18, 3, \"ng-container\", 0);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.stdGrades);\n      }\n    },\n    directives: [i4.NgIf, i4.NgForOf],\n    styles: [\".hide[_ngcontent-%COMP%]{display:none}tr#studentName[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:center;color:#daa520;font-size:2rem;text-decoration:underline}.tableHeader[_ngcontent-%COMP%], tr#studentName[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:700;text-transform:uppercase}.tableHeader[_ngcontent-%COMP%]{background-color:#f5f5f5;color:#0009;font-size:1.3rem;color:#daa520}\"]\n  });\n  return StudentGradesComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}