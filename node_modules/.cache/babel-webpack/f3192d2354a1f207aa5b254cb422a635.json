{"ast":null,"code":"import { MatSort } from \"@angular/material/sort\";\nimport { MatPaginator } from \"@angular/material/paginator\";\nimport { MatTable, MatTableDataSource } from \"@angular/material/table\";\nimport { Student } from \"src/app/classes/student\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/students.service\";\nimport * as i2 from \"src/app/services/class-room.service\";\nimport * as i3 from \"@angular/material/snack-bar\";\nimport * as i4 from \"@angular/material/button\";\nimport * as i5 from \"@angular/material/table\";\nimport * as i6 from \"@angular/material/sort\";\nimport * as i7 from \"@angular/material/paginator\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@angular/material/icon\";\nimport * as i10 from \"../add-student/add-student.component\";\nimport * as i11 from \"../student-grades/student-grades.component\";\nimport * as i12 from \"../student-details/student-details.component\";\n\nfunction StudentsComponent_th_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"Elev Id\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StudentsComponent_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const elev_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(elev_r19.id);\n  }\n}\n\nfunction StudentsComponent_th_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"Nume Elev\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StudentsComponent_td_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const elev_r20 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(elev_r20.nume);\n  }\n}\n\nfunction StudentsComponent_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"E-mail\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StudentsComponent_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const elev_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(elev_r21.email);\n  }\n}\n\nfunction StudentsComponent_th_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 25);\n    i0.ɵɵtext(1, \"Password\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StudentsComponent_td_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const elev_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(elev_r22.password);\n  }\n}\n\nfunction StudentsComponent_mat_header_cell_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-header-cell\");\n  }\n}\n\nfunction StudentsComponent_mat_cell_22_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-cell\");\n    i0.ɵɵelementStart(1, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function StudentsComponent_mat_cell_22_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const elev_r23 = restoredCtx.$implicit;\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.showGrd(elev_r23);\n    });\n    i0.ɵɵelementStart(2, \"mat-icon\");\n    i0.ɵɵtext(3, \"grading\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"button\", 28);\n    i0.ɵɵlistener(\"click\", function StudentsComponent_mat_cell_22_Template_button_click_4_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const elev_r23 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.showDetails(elev_r23);\n    });\n    i0.ɵɵelementStart(5, \"mat-icon\");\n    i0.ɵɵtext(6, \"edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function StudentsComponent_mat_cell_22_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const elev_r23 = restoredCtx.$implicit;\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.deleteStudent(elev_r23.id);\n    });\n    i0.ɵɵelementStart(8, \"mat-icon\");\n    i0.ɵɵtext(9, \"delete_outline\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StudentsComponent_mat_footer_cell_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-footer-cell\", 30);\n    i0.ɵɵtext(1, \" Loading data... \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StudentsComponent_mat_footer_cell_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-footer-cell\", 30);\n    i0.ɵɵtext(1, \" No data. \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction StudentsComponent_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 31);\n  }\n}\n\nfunction StudentsComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 32);\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"hide\": a0\n  };\n};\n\nfunction StudentsComponent_mat_footer_row_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-footer-row\", 33);\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c0, ctx_r15.listData != null));\n  }\n}\n\nfunction StudentsComponent_mat_footer_row_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"mat-footer-row\", 33);\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(1, _c0, !(ctx_r16.listData != null && ctx_r16.listData.data.length == 0)));\n  }\n}\n\nfunction StudentsComponent_div_33_app_add_student_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-add-student\");\n  }\n}\n\nfunction StudentsComponent_div_33_app_student_grades_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-student-grades\", 38);\n  }\n\n  if (rf & 2) {\n    const ctx_r30 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"stdInfo\", ctx_r30.selectedStudent);\n  }\n}\n\nfunction StudentsComponent_div_33_app_student_details_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-student-details\", 39);\n    i0.ɵɵlistener(\"studentChange\", function StudentsComponent_div_33_app_student_details_3_Template_app_student_details_studentChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return ctx_r32.update($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r31 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"student\", ctx_r31.selectedStudent);\n  }\n}\n\nfunction StudentsComponent_div_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵtemplate(1, StudentsComponent_div_33_app_add_student_1_Template, 1, 0, \"app-add-student\", 35);\n    i0.ɵɵtemplate(2, StudentsComponent_div_33_app_student_grades_2_Template, 1, 1, \"app-student-grades\", 36);\n    i0.ɵɵtemplate(3, StudentsComponent_div_33_app_student_details_3_Template, 1, 1, \"app-student-details\", 37);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r18.addUserView);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r18.studentGrd);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r18.isVisible);\n  }\n}\n\nconst _c1 = function () {\n  return [\"loading\"];\n};\n\nconst _c2 = function () {\n  return [\"noData\"];\n};\n\nconst _c3 = function () {\n  return [5, 10];\n};\n\nexport let StudentsComponent = /*#__PURE__*/(() => {\n  class StudentsComponent {\n    constructor(studentsService, classroomService, _snackBar) {\n      this.studentsService = studentsService;\n      this.classroomService = classroomService;\n      this._snackBar = _snackBar;\n      this.displayedColumns = [\"id\", \"nume\", \"email\", \"password\", \"actions\"];\n      this.selectedStudent = new Student();\n      this.isVisible = false;\n      this.addUserView = false;\n      this.studentGrd = false;\n      this.validMessage = \"\";\n      this.selectData = [];\n      this.errorMessage = \"\";\n      this.listData = new MatTableDataSource();\n      this.searchKey = \"\";\n    }\n\n    addStd() {\n      this.addUserView = true;\n      this.isVisible = false;\n      this.studentGrd = false;\n    }\n\n    showGrd(stdInfo) {\n      this.isVisible = false;\n      this.studentGrd = true;\n      this.addUserView = false;\n      this.selectedStudent = Object.assign({}, stdInfo);\n    }\n\n    getStudents() {\n      this.getStd = this.studentsService.getStudents().subscribe(data => {\n        this.listData = new MatTableDataSource(data);\n        this.listData.sort = this.sort;\n        this.listData.paginator = this.paginator;\n      }, err => {\n        console.error(err);\n      });\n    }\n\n    showDetails(student) {\n      this.isVisible = true;\n      this.studentGrd = false;\n      this.addUserView = false;\n      this.selectedStudent = Object.assign({}, student);\n    }\n\n    update(student) {\n      console.log(student);\n      const id = student.id;\n      this.studentsService.editStudent(id, student).subscribe(data => {\n        this.validMessage = \"Student details updated\";\n        this.openSnackBar();\n        this.getStudents();\n        this.isVisible = false;\n      }, err => {\n        console.log(err);\n      });\n    }\n\n    deleteStudent(id) {\n      this.studentsService.removeStudent(id).subscribe({\n        next: data => {\n          this.validMessage = \"Student removed!\";\n          this.openSnackBar();\n          this.getStudents();\n        },\n        error: error => {\n          console.error(\"There was an error!\", error);\n          this.validMessage = error.message;\n          this.openSnackBar();\n        }\n      });\n    }\n\n    openSnackBar() {\n      this._snackBar.open(this.validMessage, \"\", {\n        horizontalPosition: \"center\",\n        verticalPosition: \"top\",\n        duration: 5000\n      });\n    }\n\n    ngOnInit() {\n      this.getStudents();\n    }\n\n    ngOnDestroy() {\n      this.getStd.unsubscribe();\n    }\n\n  }\n\n  StudentsComponent.ɵfac = function StudentsComponent_Factory(t) {\n    return new (t || StudentsComponent)(i0.ɵɵdirectiveInject(i1.StudentsService), i0.ɵɵdirectiveInject(i2.ClassRoomService), i0.ɵɵdirectiveInject(i3.MatSnackBar));\n  };\n\n  StudentsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StudentsComponent,\n    selectors: [[\"app-students\"]],\n    viewQuery: function StudentsComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatTable, 5);\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(MatSort, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.table = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n      }\n    },\n    decls: 34,\n    vars: 11,\n    consts: [[1, \"page-layout-container\"], [1, \"page-layout-row-1\"], [\"mat-stroked-button\", \"\", \"color\", \"success\", 3, \"click\"], [1, \"page-layout-row-2\"], [1, \"page-layout-left\", \"mx-3\"], [\"mat-table\", \"\", \"matSort\", \"\", 3, \"dataSource\"], [\"table\", \"\"], [\"matColumnDef\", \"id\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"nume\"], [\"matColumnDef\", \"email\"], [\"matColumnDef\", \"password\"], [\"matColumnDef\", \"actions\"], [4, \"matHeaderCellDef\"], [4, \"matCellDef\"], [\"matColumnDef\", \"loading\"], [\"colspan\", \"6\", 4, \"matFooterCellDef\"], [\"matColumnDef\", \"noData\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [3, \"ngClass\", 4, \"matFooterRowDef\"], [3, \"pageSize\", \"pageSizeOptions\"], [\"paginator\", \"\"], [\"class\", \"page-layout-right\", 4, \"ngIf\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\"], [\"mat-cell\", \"\"], [\"mat-icon-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"mat-icon-button\", \"\", 3, \"click\"], [\"mat-icon-button\", \"\", \"color\", \"warn\", 3, \"click\"], [\"colspan\", \"6\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [3, \"ngClass\"], [1, \"page-layout-right\"], [4, \"ngIf\"], [3, \"stdInfo\", 4, \"ngIf\"], [3, \"student\", \"studentChange\", 4, \"ngIf\"], [3, \"stdInfo\"], [3, \"student\", \"studentChange\"]],\n    template: function StudentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"button\", 2);\n        i0.ɵɵlistener(\"click\", function StudentsComponent_Template_button_click_2_listener() {\n          return ctx.addStd();\n        });\n        i0.ɵɵtext(3, \" Add Student \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"table\", 5, 6);\n        i0.ɵɵelementContainerStart(8, 7);\n        i0.ɵɵtemplate(9, StudentsComponent_th_9_Template, 2, 0, \"th\", 8);\n        i0.ɵɵtemplate(10, StudentsComponent_td_10_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(11, 10);\n        i0.ɵɵtemplate(12, StudentsComponent_th_12_Template, 2, 0, \"th\", 8);\n        i0.ɵɵtemplate(13, StudentsComponent_td_13_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(14, 11);\n        i0.ɵɵtemplate(15, StudentsComponent_th_15_Template, 2, 0, \"th\", 8);\n        i0.ɵɵtemplate(16, StudentsComponent_td_16_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(17, 12);\n        i0.ɵɵtemplate(18, StudentsComponent_th_18_Template, 2, 0, \"th\", 8);\n        i0.ɵɵtemplate(19, StudentsComponent_td_19_Template, 2, 1, \"td\", 9);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(20, 13);\n        i0.ɵɵtemplate(21, StudentsComponent_mat_header_cell_21_Template, 1, 0, \"mat-header-cell\", 14);\n        i0.ɵɵtemplate(22, StudentsComponent_mat_cell_22_Template, 10, 0, \"mat-cell\", 15);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(23, 16);\n        i0.ɵɵtemplate(24, StudentsComponent_mat_footer_cell_24_Template, 2, 0, \"mat-footer-cell\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(25, 18);\n        i0.ɵɵtemplate(26, StudentsComponent_mat_footer_cell_26_Template, 2, 0, \"mat-footer-cell\", 17);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(27, StudentsComponent_tr_27_Template, 1, 0, \"tr\", 19);\n        i0.ɵɵtemplate(28, StudentsComponent_tr_28_Template, 1, 0, \"tr\", 20);\n        i0.ɵɵtemplate(29, StudentsComponent_mat_footer_row_29_Template, 1, 3, \"mat-footer-row\", 21);\n        i0.ɵɵtemplate(30, StudentsComponent_mat_footer_row_30_Template, 1, 3, \"mat-footer-row\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"mat-paginator\", 22, 23);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(33, StudentsComponent_div_33_Template, 4, 3, \"div\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"dataSource\", ctx.listData);\n        i0.ɵɵadvance(21);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matFooterRowDef\", i0.ɵɵpureFunction0(8, _c1));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matFooterRowDef\", i0.ɵɵpureFunction0(9, _c2));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"pageSize\", 5)(\"pageSizeOptions\", i0.ɵɵpureFunction0(10, _c3));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.addUserView || ctx.studentGrd || ctx.isVisible);\n      }\n    },\n    directives: [i4.MatButton, i5.MatTable, i6.MatSort, i5.MatColumnDef, i5.MatHeaderCellDef, i5.MatCellDef, i5.MatFooterCellDef, i5.MatHeaderRowDef, i5.MatRowDef, i5.MatFooterRowDef, i7.MatPaginator, i8.NgIf, i5.MatHeaderCell, i6.MatSortHeader, i5.MatCell, i9.MatIcon, i5.MatFooterCell, i5.MatHeaderRow, i5.MatRow, i5.MatFooterRow, i8.NgClass, i10.AddStudentComponent, i11.StudentGradesComponent, i12.StudentDetailsComponent],\n    styles: [\".mat-paginator[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{width:100%}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}td[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding:5px 10px}.hide[_ngcontent-%COMP%]{display:none}.mat-snack-bar-container[_ngcontent-%COMP%]{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center;color:#ffffffb3;background:#323232}.mat-button.mat-success[_ngcontent-%COMP%], .mat-stroked-button.mat-success[_ngcontent-%COMP%]{margin-top:15px;padding:5px 10px;color:#f5f5f5;transition:.3s;border:2px solid #daa520}.mat-button.mat-success[_ngcontent-%COMP%]:hover, .mat-stroked-button.mat-success[_ngcontent-%COMP%]:hover{background-color:#daa520}\"]\n  });\n  return StudentsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}